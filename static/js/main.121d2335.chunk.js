(this["webpackJsonphacker-news-reader"]=this["webpackJsonphacker-news-reader"]||[]).push([[0],{43:function(n,t,e){"use strict";e.r(t);var o=e(1),i=e(0),r=e(12),a=e.n(r),s=e(6),c=e(2),u=e(3),d=e(7),l={data:{pageSize:20},settingsLoaded:!1},p=Object(d.b)({name:"settings",initialState:l,reducers:{loadingComplete:function(n){n.settingsLoaded=!0},loadSettings:function(n,t){n.data=t.payload}}}),f=p.actions,b=f.loadSettings,m=f.loadingComplete,x=p.reducer,v=e(5),h=e.n(v),g=e(10),j="https://hacker-news.firebaseio.com/v0";function O(){return y.apply(this,arguments)}function y(){return(y=Object(g.a)(h.a.mark((function n(){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(j+"/topstories.json").then((function(n){return n.json()})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function w(n){return k.apply(this,arguments)}function k(){return(k=Object(g.a)(h.a.mark((function n(t){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(j+"/item/".concat(t,".json")).then((function(n){return n.json()})).then((function(n){return n.url&&(n.hostname=new URL(n.url).hostname),n})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var _,S={isFetching:!1,currentPage:0,topStories:[],displayPosts:[],err:void 0,pageNumber:0},P=Object(d.b)({name:"posts",initialState:S,reducers:{postFetchStart:function(n){n.isFetching=!0},postFetchStop:function(n){n.isFetching=!1},postFetchSuccess:function(n,t){n.err=void 0,n.topStories=t.payload.posts},displayPostFetchSuccess:function(n,t){n.displayPosts=t.payload.posts},displayPostFetchFailure:function(n,t){n.err=t.payload.err},postFetchFailed:function(n,t){n.err=t.payload.err}}}),F=P.actions,E=F.postFetchFailed,C=F.postFetchStart,L=F.postFetchStop,N=F.postFetchSuccess,z=F.displayPostFetchSuccess,A=F.displayPostFetchFailure,T=P.reducer,I=function(n){return function(){var t=Object(g.a)(h.a.mark((function t(e,o){var i,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(C()),t.prev=1,i=n.map(w),t.next=5,Promise.all(i);case 5:r=t.sent,e(z({posts:r})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(A({err:t.t0.toString()}));case 12:e(L());case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(n,e){return t.apply(this,arguments)}}()},B=e(26),D=e(20),K=e(21),U="posts",Y=new(function(){function n(){Object(D.a)(this,n),this.savedPosts=[],this.isLoaded=!1}return Object(K.a)(n,[{key:"saveToLocalStorage",value:function(){localStorage.setItem(U,JSON.stringify(this.savedPosts))}},{key:"loadPostsFromLocalStorage",value:function(){var n=localStorage.getItem(U);if(n)try{this.savedPosts=JSON.parse(n)}catch(t){console.error("Unable to parse posts array from string data...",t)}}},{key:"loadSavedPosts",value:function(){this.loadPostsFromLocalStorage()}},{key:"savePost",value:function(n){this.savedPosts=[n].concat(Object(B.a)(this.savedPosts)),this.saveToLocalStorage()}},{key:"getSavedPosts",value:function(){return this.isLoaded||this.loadSavedPosts(),this.savedPosts}}]),n}()),M=Object(d.b)({name:"savedPosts",initialState:{posts:[],postKeys:{}},reducers:{loadSavedPosts:function(n){n.posts=Y.getSavedPosts(),n.postKeys=n.posts.reduce((function(n,t){return n[t.id]=!0,n}),{})},savePost:function(n,t){var e=t.payload.post;Y.savePost(e),n.posts=Y.getSavedPosts(),n.postKeys[e.id]=!0}}}),J=M.reducer,H=M.actions,R=H.loadSavedPosts,W=H.savePost;!function(n){n[n.MOBILE=0]="MOBILE",n[n.TABLET=1]="TABLET",n[n.DESKTOP=2]="DESKTOP"}(_||(_={}));var q=600,G=1100,Q={tablet:"@media (min-width: ".concat(q,"px)"),desktop:"@media (min-width: ".concat(G,"px)")},V=e(8),X=e(22),Z=e.n(X);function $(){var n=Object(c.a)(["\n  position: relative;\n  z-index: 999;\n\n  .options {\n    position: absolute;\n    white-space: nowrap;\n    border-radius: 4px;\n    box-shadow: 0px 4px 10px rgb(230, 230, 230),\n      -4px 4px 10px rgb(230, 230, 230), 4px 4px 10px rgb(230, 230, 230);\n    background-color: white;\n    overflow: hidden;\n    ","\n  }\n\n  .options--entering {\n    animation: enterAnimation 0.3s;\n  }\n\n  .options--exiting {\n    animation: exitAnimation 0.3s;\n  }\n\n  .options__item {\n    background: none;\n    border: none;\n    display: flex;\n    padding: 16px;\n    transition: 0.3s;\n  }\n\n  .options__item:hover {\n    cursor: pointer;\n    background-color: #ebebeb;\n  }\n\n  .options__item--disabled {\n    opacity: 0.5;\n  }\n\n  .options__item--disabled:hover {\n    cursor: auto;\n  }\n\n  .options__item__icon {\n    height: 20px;\n    margin-right: 8px;\n  }\n\n  .options__item__name {\n    font-size: 18px;\n  }\n\n  @keyframes enterAnimation {\n    from {\n      opacity: 0;\n      transform: translateY(-10px);\n    }\n\n    to {\n      opacity: 1;\n      transform: translateY(0px);\n    }\n  }\n\n  @keyframes exitAnimation {\n    from {\n      opacity: 1;\n      transform: translateY(0px);\n    }\n\n    to {\n      opacity: 0;\n      transform: translateY(-10px);\n    }\n  }\n"]);return $=function(){return n},n}var nn=Object(u.a)((function(n){var t,e=n.className,r=n.isOpen,a=n.options,s=n.onOptionClick,c=n.onClose,u=n.icon,d=Object(i.useState)(!1),l=Object(V.a)(d,2),p=l[0],f=l[1],b=Object(i.useRef)(null);!function(n,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i.useEffect)((function(){function o(e){var o;n&&(null===(o=n.current)||void 0===o?void 0:o.contains(e.target))||t()}if(e)return document.addEventListener("mousedown",o,!1),function(){return document.removeEventListener("mousedown",o,!1)}}),[n,t,e])}(b,(function(){f(!0),setTimeout((function(){f(!1),c()}),300)}),r);return Object(o.jsxs)("div",{className:e,ref:b,children:[u(),r&&Object(o.jsx)("div",{className:"options options--".concat(p?"exiting":"entering"),style:{top:null===(t=b.current)||void 0===t?void 0:t.offsetHeight},children:a.map((function(n){return Object(o.jsxs)("button",{className:"options__item ".concat(n.disabled&&"options__item--disabled"),onClick:function(t){return function(n,t){n.preventDefault(),n.stopPropagation(),s(t)}(t,n.key)},disabled:n.disabled,children:[Object(o.jsx)("img",{className:"options__item__icon",src:n.iconUrl,alt:"option"}),Object(o.jsx)("span",{className:"options__item__name",children:n.name})]},n.key)}))})]})}))($(),(function(n){return n.alignment&&"".concat(n.alignment,": 0px")}));function tn(){var n=Object(c.a)(["\n  .dialog {\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 999;\n  }\n\n  .dialog__content {\n    background-color: white;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    max-height: 50%;\n    overflow-y: scroll;\n  }\n\n  .dialog__content--entering {\n    animation: enterAnimation 0.3s forwards;\n  }\n\n  .dialog__content--exiting {\n    animation: exitAnimation 0.3s forwards;\n  }\n\n  .options__item {\n    display: flex;\n    align-items: center;\n    padding: 16px;\n    background: none;\n    border: none;\n    font-size: 20px;\n    width: 100%;\n    text-align: left;\n    border-bottom: 1px solid #e1e1e1;\n  }\n\n  .options__item__icon {\n    margin-right: 16px;\n    opacity: 0.5;\n  }\n\n  .options__item__name {\n  }\n\n  @keyframes enterAnimation {\n    from {\n      bottom: -50%;\n    }\n\n    to {\n      bottom: 0;\n    }\n  }\n\n  @keyframes exitAnimation {\n    from {\n      bottom: 0;\n    }\n\n    to {\n      bottom: -50%;\n    }\n  }\n"]);return tn=function(){return n},n}var en=Object(u.a)((function(n){var t=n.isOpen,e=n.className,r=n.onClose,a=n.options,s=n.onOptionClicked,c=Object(i.useState)(!1),u=Object(V.a)(c,2),d=u[0],l=u[1];Object(i.useEffect)((function(){if(t){var n=document.body.style.overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=n}}}),[t]);return t?Object(o.jsx)("div",{className:e,children:Object(o.jsx)("div",{className:"dialog",onClick:function(n){n.stopPropagation(),n.preventDefault(),l(!0),setTimeout((function(){l(!1),r()}),300)},children:Object(o.jsx)("div",{className:"dialog__content  dialog__content--".concat(d?"exiting":"entering"),onClick:function(n){n.stopPropagation(),n.preventDefault()},children:Object(o.jsx)("div",{className:"options",children:a.map((function(n){return Object(o.jsxs)("button",{className:"options__item",onClick:function(){return s(n.key)},children:[Object(o.jsx)("img",{className:"options__item__icon",src:n.iconUrl,alt:"option"}),Object(o.jsx)("span",{className:"options__item__name",children:n.name})]},n.key)}))})})})}):null}))(tn());function on(){var n=Object(c.a)(["\n  border-radius: 24px;\n  height: 32px;\n  padding: 4px;\n  transition: 0.3s;\n\n  &:hover {\n    background-color: #e1e1e1;\n  }\n"]);return on=function(){return n},n}function rn(){var n=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]);return rn=function(){return n},n}function an(){var n=Object(c.a)(["\n  font-size: 12px;\n  color: grey;\n  padding: 3px 6px;\n  display: inline-block;\n  border-radius: 16px;\n  min-width: 28px;\n  text-align: center;\n  margin-left: 16px;\n  min-width: 30px;\n"]);return an=function(){return n},n}function sn(){var n=Object(c.a)(["\n  font-size: 12px;\n  color: grey;\n  padding: 3px 6px;\n  display: inline-block;\n  border-radius: 16px;\n  min-width: 28px;\n  text-align: center;\n  min-width: 30px;\n"]);return sn=function(){return n},n}function cn(){var n=Object(c.a)(["\n  font-size: 12px;\n  color: grey;\n  flex: 1;\n  min-width: 120px;\n"]);return cn=function(){return n},n}function un(){var n=Object(c.a)(["\n  display: flex;\n  align-items: center;\n"]);return un=function(){return n},n}function dn(){var n=Object(c.a)(["\n  font-size: 12px;\n  color: #999999;\n"]);return dn=function(){return n},n}function ln(){var n=Object(c.a)(["\n  font-size: 18px;\n  margin-bottom: 4px;\n  font-weight: 500;\n"]);return ln=function(){return n},n}function pn(){var n=Object(c.a)(["\n  display: flex;\n  flex: 1;\n  margin-bottom: 6px;\n  align-items: flex-start;\n  flex-direction: column;\n"]);return pn=function(){return n},n}function fn(){var n=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  flex: 1;\n"]);return fn=function(){return n},n}function bn(){var n=Object(c.a)(["\n  flex: 1;\n  position: relative;\n  padding: 8px 12px;\n  transition: 0.3s;\n  display: flex;\n  align-items: stretch;\n  text-decoration: none;\n  color: black;\n  outline: none;\n  /* border-bottom: 1px solid #e1e1e1; */\n  background-color: #f8f9fd;\n  border-radius: 6px;\n  margin-bottom: 8px;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  "," {\n    padding: 16px 24px;\n\n    &:hover "," {\n      right: 0px;\n      opacity: 1;\n    }\n  }\n"]);return bn=function(){return n},n}function mn(){var n=Object(c.a)(["\n  display: flex;\n  margin: 0px 16px;\n\n  &:first-of-type ",":first-of-type {\n    visibility: hidden;\n  }\n\n  &:last-of-type ",":last-of-type {\n    visibility: hidden;\n  }\n"]);return mn=function(){return n},n}function xn(){var n=Object(c.a)(["\n  width: 2px;\n  align-self: stretch;\n  display: flex;\n  flex-direction: column;\n  margin-right: 16px;\n  justify-content: center;\n  align-items: center;\n"]);return xn=function(){return n},n}function vn(){var n=Object(c.a)(["\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  border: 2px solid #4c98fa;\n  margin: 4px 0px;\n"]);return vn=function(){return n},n}function hn(){var n=Object(c.a)(["\n  width: 2px;\n  background-color: #4c98fa;\n  flex: 1;\n"]);return hn=function(){return n},n}function gn(){var n=Object(c.a)(["\n  opacity: 0;\n  transition: 0.3s;\n  position: absolute;\n  right: 0;\n  bottom: 0;\n\n  "," {\n    position: relative;\n    right: -5px;\n  }\n"]);return gn=function(){return n},n}var jn=function(n){var t=n.post,e=n.onSavePostClicked,r=n.isSaved,a=Object(i.useState)(!1),s=Object(V.a)(a,2),c=s[0],u=s[1],d=function(){var n=Object(i.useState)(window.innerWidth),t=Object(V.a)(n,2),e=t[0],o=t[1],r=function(){o(window.innerWidth)};return Object(i.useEffect)((function(){return window.addEventListener("resize",r),function(){return window.removeEventListener("resize",r)}}),[]),e<q?_.MOBILE:e<G?_.TABLET:_.DESKTOP}(),l=function(){u(!1)},p=function(n){n.stopPropagation(),n.preventDefault(),u(!0)},f=function(n){switch(n){case"save_later":e()}u(!1)};return Object(o.jsxs)(_n,{children:[Object(o.jsxs)(kn,{children:[Object(o.jsx)(yn,{}),Object(o.jsx)(wn,{}),Object(o.jsx)(yn,{})]}),Object(o.jsxs)(Sn,{href:t.url,target:"_blank",rel:"noopener noreferrer",children:[Object(o.jsxs)(Pn,{children:[Object(o.jsxs)(Fn,{children:[Object(o.jsx)(En,{children:t.title}),Object(o.jsx)(Cn,{children:t.hostname})]}),Object(o.jsxs)(Ln,{children:[Object(o.jsx)(Nn,{children:Z()(1e3*t.time).format("ddd DD/MM/YYYY")}),Object(o.jsx)(zn,{children:t.descendants}),Object(o.jsx)("img",{src:"/hacker-news-reader/images/comment.svg",alt:"comment icon",height:"14"}),Object(o.jsx)(An,{children:t.score}),Object(o.jsx)("img",{src:"/hacker-news-reader/images/score.svg",alt:"comment icon",height:"14"})]})]}),Object(o.jsxs)(Tn,{children:[d===_.MOBILE?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(In,{onClick:p,src:"/hacker-news-reader/images/vertical-more.svg",alt:"comment icon"}),Object(o.jsx)(en,{isOpen:c,onClose:l,options:[{name:r?"Already Saved":"Save for later",key:"save_later",iconUrl:"/hacker-news-reader/images/save.svg",disabled:r}],onOptionClicked:f})]}):Object(o.jsx)(nn,{alignment:"right",isOpen:c,onClose:l,options:[{name:r?"Already Saved":"Save for later",key:"save_later",iconUrl:"/hacker-news-reader/images/save.svg",disabled:r}],onOptionClick:f,icon:function(){return Object(o.jsx)(In,{onClick:p,src:"/hacker-news-reader/images/vertical-more.svg",alt:"comment icon"})}}),Object(o.jsx)(On,{src:"/hacker-news-reader/images/open-in-new.svg",alt:"comment icon",height:"18px"})]})]})]})},On=u.a.img(gn(),Q.tablet),yn=u.a.div(hn()),wn=u.a.div(vn()),kn=u.a.div(xn()),_n=u.a.div(mn(),yn,yn),Sn=u.a.a(bn(),Q.tablet,On),Pn=u.a.div(fn()),Fn=u.a.div(pn()),En=u.a.div(ln()),Cn=u.a.div(dn()),Ln=u.a.div(un()),Nn=u.a.div(cn()),zn=u.a.div(sn()),An=u.a.div(an()),Tn=u.a.div(rn()),In=u.a.img(on());function Bn(){var n=Object(c.a)(["\n  border-radius: 8px;\n  height: 100%;\n  overflow: scroll;\n  background-color: white;\n  padding: 28px 0px;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n\n  &-::-webkit-scrollbar {\n    display: none;\n  }\n\n  "," {\n    max-width: 70%;\n    margin: 0px auto;\n  }\n"]);return Bn=function(){return n},n}var Dn=u.a.div(Bn(),Q.tablet),Kn=function(n){var t=n.posts,e=n.onSavePostClicked,i=n.savedPostKeys;return Object(o.jsx)(Dn,{children:t.map((function(n){return Object(o.jsx)(jn,{post:n,onSavePostClicked:function(){return e(n)},isSaved:!!i[n.id]},n.id)}))})};function Un(){var n=Object(c.a)(["\n  background: linear-gradient(rgba(255, 255, 255, 0.2), white);\n  position: absolute;\n  height: 50px;\n  width: 100%;\n  z-index: 10000;\n  /* background-color: red; */\n  bottom: 0px;\n  z-index: 10000;\n"]);return Un=function(){return n},n}function Yn(){var n=Object(c.a)(["\n  background: linear-gradient(white, rgba(255, 255, 255, 0.2));\n  position: absolute;\n  height: 50px;\n  width: 100%;\n  z-index: 10000;\n"]);return Yn=function(){return n},n}function Mn(){var n=Object(c.a)(["\n  height: 100%;\n  position: relative;\n"]);return Mn=function(){return n},n}function Jn(){var n=Object(c.a)(["\n  flex: 1;\n  height: 100%;\n  padding-bottom: 64px;\n  overflow: hidden;\n"]);return Jn=function(){return n},n}var Hn=u.a.div(Jn()),Rn=u.a.div(Mn()),Wn=u.a.div(Yn()),qn=u.a.div(Un()),Gn=function(){var n=Object(s.b)(),t=Object(s.c)((function(n){return n.posts})),e=t.isFetching,r=t.displayPosts,a=t.err,c=Object(s.c)((function(n){return n.savedPosts.postKeys}));Object(i.useEffect)((function(){n(function(){var n=Object(g.a)(h.a.mark((function n(t,e){var o,i,r,a,s;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e(),i=o.posts.pageNumber*o.settings.data.pageSize,r=i+o.settings.data.pageSize,o.posts.topStories.length){n.next=20;break}return t(C()),n.prev=5,n.next=8,O();case 8:s=n.sent,t(N({posts:s})),a=s.slice(i,r),n.next=18;break;case 13:return n.prev=13,n.t0=n.catch(5),t(E({err:n.t0.toString()})),t(L()),n.abrupt("return");case 18:n.next=21;break;case 20:a=o.posts.topStories.slice(i,r);case 21:t(I(a));case 22:case"end":return n.stop()}}),n,null,[[5,13]])})));return function(t,e){return n.apply(this,arguments)}}()),n(R())}),[n]);return Object(o.jsxs)(Hn,{children:[e&&Object(o.jsx)("div",{children:"Fetching..."}),a&&Object(o.jsx)("div",{children:a}),!a&&Object(o.jsxs)(Rn,{children:[Object(o.jsx)(Wn,{}),Object(o.jsx)(Kn,{posts:r,onSavePostClicked:function(t){n(W({post:t}))},savedPostKeys:c}),Object(o.jsx)(qn,{})]})]})};function Qn(){var n=Object(c.a)(["\n  flex: 1;\n  font-size: 20px;\n"]);return Qn=function(){return n},n}function Vn(){var n=Object(c.a)(["\n  display: flex;\n  z-index: 1;\n  padding: 16px;\n  background-color: transparent;\n"]);return Vn=function(){return n},n}function Xn(){var n=Object(c.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]);return Xn=function(){return n},n}var Zn=u.a.div(Xn()),$n=u.a.div(Vn()),nt=u.a.div(Qn()),tt=function(){return Object(o.jsxs)(Zn,{children:[Object(o.jsxs)($n,{children:[Object(o.jsx)(nt,{children:"HackerNews"}),Object(o.jsx)("img",{src:"/hacker-news-reader/images/settings.svg",alt:"settings"})]}),Object(o.jsx)(Gn,{})]})};function et(){var n=Object(c.a)(['\n  height: 100vh;\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,\n    Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n']);return et=function(){return n},n}var ot=u.a.div(et()),it=function(){var n=Object(s.b)(),t=Object(s.c)((function(n){return n.settings.settingsLoaded}));return Object(i.useEffect)((function(){n((function(n){var t=localStorage.getItem("settings");n(b(t?JSON.parse(t):l.data)),n(m())}))}),[n]),t?Object(o.jsx)(ot,{children:Object(o.jsx)(tt,{})}):null},rt=e(4),at=Object(rt.c)({posts:T,settings:x,savedPosts:J}),st=Object(d.a)({reducer:at});a.a.render(Object(o.jsx)(s.a,{store:st,children:Object(o.jsx)(it,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.121d2335.chunk.js.map